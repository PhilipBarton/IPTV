<html>
    <head>
        <link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
        <style>
            img{
  width:50px;
            }
.Box-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        /* The snackbar - position it at the bottom and in the middle of the screen */
        #snackbar {
            visibility: hidden;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom: 30px;
        }

        /* Show the snackbar when clicking on a button (class added with JavaScript) */
        #snackbar.show {
            visibility: visible;
            -webkit-animation: fadein 0.5s, fadeout 0.5s 1s;
            animation: fadein 0.5s, fadeout 0.5s 1s;
        }

        /* Animations to fade the snackbar in and out */
        @-webkit-keyframes fadein {
            from {
                bottom: 0;
                opacity: 0;
            }

            to {
                bottom: 30px;
                opacity: 1;
            }
        }

        @keyframes fadein {
            from {
                bottom: 0;
                opacity: 0;
            }

            to {
                bottom: 30px;
                opacity: 1;
            }
        }

        @-webkit-keyframes fadeout {
            from {
                bottom: 30px;
                opacity: 1;
            }

            to {
                bottom: 0;
                opacity: 0;
            }
        }

        @keyframes fadeout {
            from {
                bottom: 30px;
                opacity: 1;
            }

            to {
                bottom: 0;
                opacity: 0;
            }
            }
.column {
  
  width: 70%;
}
            .small{
                width:30%!important;
            }
            .row{
                display:flex;
                width:100%;
            }
body {
        width:100%;
        display: inline-flex;
        flex-wrap: wrap;
}
/* Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
        </style>
    </head>
<body> 
    
    <div class="row">
        <div class="column small">
            <h1>
            Convert M3U file to HTML
        </h1>
        <div class="col-xs-12 col-md-6 mt-3">
            <div class="Box box-shadow">
                <div class="Box-row">
                    <label for="file-selector">Upload a M3U file</label>
                    <input type="file" id="file-selector">
                </div>
            </div>
        </div>
        <div class="col-xs-12 mt-2">
            <div id="loader">
                <span class="mt-2">Loading<span class="AnimatedEllipsis"></span></span>
            </div>
    <ul>
     
            
        
            <div id="main">
                <input class="form-control input-block" type="text" id="search-input" onkeyup="search()"
                       placeholder="Search" title="Type in a keyword">
                <div id="list" class="Box mt-2">
                    <div class="Box-header">
                        <select id="select" onchange="filterItems(this)" class="form-select">
                            <option value="all">All Visible</option>
                        </select>
                    </div>
                </div>
                <p id="status"></p>
            </div>
            <div class="mt-5">
                You can use <a href="https://raw.githubusercontent.com/a133xz/m3u-to-html/master/example.m3u"
                   target="_blank">this file</a> as example.

                <p> Learn more about the project <a href="https://github.com/a133xz/m3u-to-html">on github.</a> You can
                    also <a href="https://antonio-r.now.sh/" target="_blank">visit my site ü§∑‚Äç‚ôÇÔ∏è</a> .</p>
            </div>
            <div id="snackbar">
                <div class="Toast Toast--success">
                    <span class="Toast-icon">
                        <!-- <%= octicon "check" %> -->
                        <svg width="12" height="16" viewBox="0 0 12 16" class="octicon octicon-check"
                             aria-hidden="true">
                            <path fill-rule="evenodd" d="M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z" />
                        </svg>
                    </span>
                    <span class="Toast-content">Link copied</span>
                </div>
            </div>
        </div>

            
  </ul>
            
        
            
        </div>
    <div class=" column">  
        <div id="waveform"></div>
  <button class="btn btn-primary" onclick="wavesurfer.playPause()">
    <i class="glyphicon glyphicon-play"></i>
    Play/Pause
  </button>

  <button class="btn btn-primary loadM3U">
    <i class="glyphicon glyphicon-play"></i>
    LOAD M3U
  </button>

<ul class="playlistbox">
</ul>
        <h1>hey</h1>
        <iframe width="70%" height="3000px" src="https://tvlistings.zap2it.com/?aid=gapzap" title="W3Schools Free Online Web Tutorials"></iframe>
</div>
    </div>

       <script>
  const main = document.getElementById("main");
const status = document.getElementById("status");
const select = document.getElementById("select");
const loader = document.getElementById("loader");
const listDiv = document.getElementById("list");
const input = document.getElementById("search-input");
const snackbar = document.getElementById("snackbar");

loader.style.display = "none";
main.style.display = "none";

// Possible external variables
const splitBy = "EXTINF:-1";
const keysToParse = { name: "tvg-name", logo: "tvg-logo" };

// Get group of values
const getValuesByKey = (string, key) => {
  const regx = new RegExp(`${key}="(.*?)"`);
  const value = string.match(regx);
  if (value && value.length) {
    return value[1];
  }
  return "";
};
// Get Link
const getLink = (string) => {
  const regx =("/http[s]*:\/\/[^\/]+(\/.+)/") ;
  const value = string.match(regx);
  if (value && value.length) {
    return value[0];
  }
  return "";
};

// Alert
var timeOut;
var stopTimeOut = function () {
  snackbar.classList.remove("show");
  clearTimeout(timeOut);
};
var setAlert = function () {
  timeOut = setTimeout(function () {
    snackbar.classList.remove("show");
  }, 1300);
};

// Copy URL
async function copy_url(url) {
  try {
    await navigator.clipboard.writeText(url);
    console.log("Text or Page URL copied");
    stopTimeOut();
    // Add the "show" class to DIV
    snackbar.className = "show";
    // After 3 seconds, remove the show class from DIV
    setAlert();
  } catch (err) {
    console.error("Failed to copy: ", err);
  }
}
// The constructor
function Channel(name, logo, link) {
  this.name = name;
  this.logo = logo;
  this.link = link;
}

if (window.FileList && window.File && window.FileReader) {
  document
    .getElementById("file-selector")
    .addEventListener("change", (event) => {
      status.textContent = "";
      loader.style.display = "block";
      const obj = [];
      const filters = new Set();
      const file = event.target.files[0];
      if (!file.type) {
        status.textContent =
          "Error: The File.type property does not appear to be supported on this browser.";
        return;
      }
      const reader = new FileReader();
      reader.readAsText(file, "UTF-8");
      reader.onload = function (evt) {
        const results = evt.target.result;
        results.split(splitBy).map(function (channel) {
          const name = getValuesByKey(channel, keysToParse.name);
          const group = getValuesByKey(channel, keysToParse.logo);
          const link = getLink(channel);
          if (link) {
            // if group equal...
            return obj.push(new Channel(name, logo, link));
          }
          return [];
        });
        const ul = document.createElement("ul");
        for (let i = 0; i < obj.length; ++i) {
          const anchor = document.createElement("a");
          const li = document.createElement("li");
          anchor.href = obj[i].link;
          anchor.textContent = obj[i].name;
          li.appendChild(anchor);
          li.insertAdjacentHTML(
            "beforeend",
            `<button class="btn mr-2" type="button" aria-label="Copy icon" onclick="copy_url('${obj[i].link}')">
        <svg aria-hidden="true" role="img" class="octicon" viewBox="0 0 16 16" width="16" height="16" fill="currentColor" style="display: inline-block; user-select: none; vertical-align: text-bottom;"><path fill-rule="evenodd" d="M5.75 1a.75.75 0 00-.75.75v3c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-3a.75.75 0 00-.75-.75h-4.5zm.75 3V2.5h3V4h-3zm-2.874-.467a.75.75 0 00-.752-1.298A1.75 1.75 0 002 3.75v9.5c0 .966.784 1.75 1.75 1.75h8.5A1.75 1.75 0 0014 13.25v-9.5a1.75 1.75 0 00-.874-1.515.75.75 0 10-.752 1.298.25.25 0 01.126.217v9.5a.25.25 0 01-.25.25h-8.5a.25.25 0 01-.25-.25v-9.5a.25.25 0 01.126-.217z"></path></svg>
      </button>`
          );
          li.setAttribute("group", obj[i].logo);
          li.classList.add("Box-row");
          filters.add(obj[i].logo);
          ul.appendChild(li);
          ul.id = "list-items";
        }
        listDiv.appendChild(ul);
        const filtersArr = Array.from(filters);
        for (let i = 0; i < filtersArr.length; i++) {
          var opt = filtersArr[i];
          var el = document.createElement("option");
          el.textContent = opt;
          el.value = opt;
          select.appendChild(el);
        }
        loader.style.display = "none";
        main.style.display = "block";
      };
      reader.onerror = function (evt) {
        status.textContent = "error reading file";
      };
    });
}

// Events from HTML
function filterItems(select) {
  const divSelect = select.value;
  const ul = document.getElementById("list-items");
  const li = ul.getElementsByTagName("li");
  for (let i = 0; i < li.length; i++) {
    let nodeValue = li[i].attributes.group.nodeValue;
    if (divSelect === "all") {
      li[i].style.display = "";
    } else {
      if (divSelect == nodeValue) {
        li[i].style.display = "";
      } else {
        li[i].style.display = "none";
      }
    }
  }
}

function search() {
  const filter = input.value.toUpperCase();
  const ul = document.getElementById("list-items");
  const li = ul.getElementsByTagName("li");
  for (let i = 0; i < li.length; i++) {
    let item = li[i].getElementsByTagName("a")[0];
    let textValue = item.textContent || item.innerText;
    if (textValue.toUpperCase().indexOf(filter) > -1) {
      li[i].style.display = "";
    } else {
      li[i].style.display = "none";
    }
  }
}
       </script>
    <script>
        var wavesurfer = WaveSurfer.create({
    container: '#waveform',
    waveColor: '#D2EDD4',
    progressColor: '#46B54D'
}); 

// load default track
wavesurfer.load('https://ia800508.us.archive.org/15/items/LoveThemeFromTheGodfather/02LoveThemeFromTheGodfather.mp3');

// load M3U playlist
var myPlaylist = wavesurfer.Playlist;
$('body').on('click', '.loadM3U', function(){
  myPlaylist.init({
    wavesurfer: wavesurfer,
    playlistFile: 'https://cdn.rawgit.com/katspaugh/wavesurfer.js/gh-pages/example/playlist/sample.m3u',
    playlistType: 'm3u'
  });    
});

// on playlist parsed with event playlist-ready
var myList;
wavesurfer.on('playlist-ready', function () {
  myList = myPlaylist.getPlaylist();
  for (var i = 0; i < myList.length; i++) {
    if (myList[i]) {
      $('.playlistbox').append('<li class="playTrack" data-id="'+i+'">'+myList[i]+'</li>');
    }
  }
  console.log(myList); 
});  

// on waveform ready
wavesurfer.on('waveform-ready', function () {
  wavesurfer.play();
});

// on playlist track click
$('body').on('click', '.playTrack', function(){
  wavesurfer.load(myList[$(this).data('id')]);
});

Resources
    </script>
    
</body>
</html>
